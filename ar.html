<!--
	Project by Tavius Koktavy for Social Theory and Curatorial Practice, Fall 2018 NYU - github: https://github.com/kotavy/colorized-ar
	AR.js by @jerome_etienne - github: https://github.com/jeromeetienne/ar.js - info: https://medium.com/arjs/augmented-reality-in-10-lines-of-html-4e193ea9fdbf
-->

<head>
	<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
	<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.2/aframe/build/aframe-ar.js"></script>
	<script>
		AFRAME.registerComponent('link-to-img', {
			init: function() {
				var el = this.el;
				el.addEventListener('click', function(evt) {
					if (el.object3D.visible == true && evt.detail.cursorEl) {
						alert("Clicked"); // Debugging
						var urlFront = 'https://raw.githubusercontent.com/kotavy/colorized-ar/master/colorized-photos/';
						var imgId = el.getAttribute('material').src.getAttribute('src'); // Get the ID of the JPG image asset.
						console.log(imgId);
						//var targetImg = imgId.substring(imgId.indexOf('#') + 1); // Clip off the "#".
						//var imgSrc = document.querySelector(targetImg).getAttribute('src'); // Get the src string from the image.
						var imgSrc = imgId.substring(imgId.indexOf('/') + 1);
						console.log(imgSrc);
						window.location = link + imgSrc;
					}
				})
			}
		});
	</script>
</head>

<body style='margin : 0px; overflow: hidden;'>
	<a-scene embedded arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>
		<a-assets>
			<img id="color1" src="colorized-photos/dust-bowl.jpg">
			<img id="color2" src="colorized-photos/migrant-family.jpg">
			<img id="color3" src="colorized-photos/irish-ellis-island.jpg">
			<img id="color4" src="colorized-photos/hooverville-central-park.jpg">
			<img id="color5" src="colorized-photos/family-on-road.jpg">
		</a-assets>

		<a-marker type='pattern' url='marker1.patt'>
			<!-- <a-image src="#color1" width="900" height="716"></a-image> -->
			<!-- <a-image rotation="90 0 0" src="#color1" width="300" height="239"></a-image> -->
			<!-- position="left<->right, far<->near, "up<->down"-->
			<a-plane link-to-img emitevents='true' cursor='rayOrigin: mouse' position='2 0 2.8' rotation='-90 0 0' width='5.332' height='4' material='side:double; src: #color1'>
			</a-plane>
		</a-marker>

		<a-marker type='pattern' url='marker2.patt'>
			<a-plane link-to-img emitevents='true' cursor='rayOrigin: mouse' position='2 0 2.8' rotation='-90 0 0' width='5.032' height='4' material='side:double; src: #color2'>
			</a-plane>
			<!-- <a-sphere position='0 0.5 0' material='opacity: 0.5; color:blue'></a-sphere> -->
		</a-marker>

		<a-marker type='pattern' url='marker3.patt'>
			<!-- <a-image src="#color3" width="775" height="1114"></a-image> -->
			<!-- <a-box position='0 0.5 0' material='opacity: 0.5; color:red'></a-box> -->
		</a-marker>

		<a-marker type='pattern' url='marker4.patt'>
			<a-plane link-to-img emitevents='true' cursor='rayOrigin: mouse' position='2 0 2.8' rotation='-90 0 0' width='5.124' height='4' material='side:double; src: #color4'>
			</a-plane>
			<!-- <a-sphere position='0 0.5 0' material='opacity: 0.5; color:yellow'></a-sphere> -->
		</a-marker>

		<a-marker type='pattern' url='marker5.patt'>
			<a-plane link-to-img emitevents='true' cursor='rayOrigin: mouse' position='2 0 2.8' rotation='-90 0 0' width='5.08' height='4' material='side:double; src: #color5' </a-plane>
				<!-- <a-sphere position='0 0.5 0' material='opacity: 0.5; color:pink'></a-sphere> -->
		</a-marker>

		<a-entity camera></a-entity>
	</a-scene>
</body>